<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>GAT PLN Part 2 ‚Äî 100 Soal (1.5 Jam) ‚Äî ZeeTech IT Solution</title>
    <style>
      :root {
        --bg: #eaf7f2;
        --card: #0b2b22;
        --accent: #00c896;
        --text: #012822;
      }
      * {
        box-sizing: border-box;
      }
      body {
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
        background: var(--bg);
        color: var(--text);
        margin: 0;
        padding: 20px;
      }
      .container {
        max-width: 980px;
        margin: 0 auto;
      }
      .header {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .logo {
        width: 56px;
        height: 56px;
        border-radius: 10px;
        background: linear-gradient(180deg, #05281f, #073b31);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--bg);
        font-weight: 700;
      }
      h1 {
        margin: 0;
        font-size: 18px;
      }
      .card {
        background: white;
        border-radius: 12px;
        padding: 18px;
        margin-top: 14px;
        box-shadow: 0 8px 20px rgba(2, 6, 6, 0.08);
      }
      .topbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }
      .timer {
        font-weight: 700;
        color: var(--accent);
      }
      .progress {
        font-size: 13px;
        color: #556b63;
      }
      .question-area {
        min-height: 160px;
      }
      .qtext {
        font-weight: 600;
        margin-bottom: 10px;
      }
      .options {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .opt-btn {
        background: #f0fffb;
        border: 1px solid #c8efe6;
        padding: 10px;
        border-radius: 8px;
        cursor: pointer;
        text-align: left;
      }
      .opt-btn:hover {
        transform: translateY(-1px);
      }
      .opt-btn.selected {
        outline: 3px solid rgba(0, 200, 150, 0.18);
      }
      .controls {
        display: flex;
        gap: 8px;
        justify-content: space-between;
        margin-top: 14px;
      }
      .btn {
        background: var(--accent);
        color: white;
        border: none;
        padding: 10px 14px;
        border-radius: 8px;
        cursor: pointer;
      }
      .btn.secondary {
        background: #e6f6f0;
        color: var(--text);
        border: 1px solid #cfeee4;
      }
      .summary {
        margin-top: 18px;
      }
      .result {
        background: #f7fff9;
        border: 1px solid #dff6ea;
        padding: 14px;
        border-radius: 10px;
      }
      .detail-list {
        max-height: 400px;
        overflow: auto;
        margin-top: 10px;
        padding: 8px;
        background: white;
        border-radius: 8px;
        border: 1px solid #eefaf4;
      }
      .small {
        font-size: 13px;
        color: #446a5d;
      }
      .footer {
        margin-top: 12px;
        font-size: 13px;
        color: #446a5d;
      }
      .download-btn {
        background: #066a58;
        color: white;
        border: none;
        padding: 10px 12px;
        border-radius: 8px;
        cursor: pointer;
      }
      .explain {
        margin-top: 8px;
        padding: 10px;
        border-radius: 8px;
        background: #f0fffb;
        border: 1px solid #dff6ea;
      }

      /* Start screen */
      .start-screen {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(
          180deg,
          rgba(2, 18, 14, 0.6),
          rgba(2, 32, 24, 0.6)
        );
        z-index: 60;
      }
      .start-card {
        background: white;
        border-radius: 12px;
        padding: 22px;
        max-width: 760px;
        width: 96%;
        text-align: center;
      }
      .start-card h2 {
        margin: 0 0 8px 0;
        color: #023b30;
      }
      .start-card p {
        margin: 6px 0;
        color: #014033;
      }
      .start-btn {
        background: var(--accent);
        color: white;
        border: none;
        padding: 12px 18px;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
      }
      .start-secondary {
        background: #e6f6f0;
        color: var(--text);
        border: 1px solid #cfeee4;
        padding: 10px 14px;
        border-radius: 8px;
        cursor: pointer;
      }
      .fade-out {
        animation: fadeOut 400ms forwards;
      }
      @keyframes fadeOut {
        from {
          opacity: 1;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          transform: translateY(-8px);
        }
      }
      .fade-in {
        animation: fadeIn 300ms forwards;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .note {
        background: #f0fffb;
        border: 1px solid #dff6ea;
        padding: 10px;
        border-radius: 8px;
        margin-top: 12px;
      }
    </style>
  </head>
  <body>
    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
      <div class="start-card fade-in">
        <h2>Selamat Datang di GAT PLN ‚Äî Part 2</h2>
        <h3 style="margin: 6px 0; color: #024">Welcome to GAT PLN ‚Äî Part 2</h3>
        <p class="small">
          Apakah kamu siap untuk tes ini? &nbsp;üôè Jangan lupa baca doa dulu
          sebelum memulai.
        </p>
        <p class="small">
          Are you ready for this test? &nbsp;üôè Don‚Äôt forget to say a short
          prayer before starting.
        </p>

        <div class="note">
          <strong>Pesan semangat / Motivation:</strong>
          <div style="margin-top: 6px">
            Ingat, hasil terbaik datang dari persiapan terbaik. Tetap tenang,
            baca doa, dan kerjakan dengan fokus. Kamu bisa!
          </div>
          <div style="margin-top: 6px; font-style: italic">
            Remember, the best results come from the best preparation. Stay
            calm, say a prayer, and focus. You got this!
          </div>
        </div>

        <div
          style="
            margin-top: 14px;
            display: flex;
            gap: 10px;
            justify-content: center;
          "
        >
          <button class="start-btn" id="startBtn">
            Mulai Tes ¬∑ Start Test
          </button>
          <button class="start-secondary" id="reviewBtn">
            Baca Doa / Review (saya siap)
          </button>
        </div>
        <p class="small" style="margin-top: 10px; color: #056">
          Catatan: Tes 1,5 jam. Urutan soal tetap: Verbal ‚Üí Numerik ‚Üí Logika ‚Üí
          Analitik. Semua soal bertema PLN.
        </p>
      </div>
    </div>

    <div class="container" id="mainContent" style="display: none; opacity: 0">
      <div class="header">
        <div class="logo">PLN</div>
        <div>
          <h1>GAT PLN ‚Äî Part 2 (1.5 Jam, 100 Soal)</h1>
          <div class="small">
            Urutan tetap: Verbal ‚Üí Numerik ‚Üí Logika ‚Üí Analitik. Navigasi Next /
            Previous.
          </div>
        </div>
      </div>

      <div class="card">
        <div class="topbar">
          <div>
            <div class="progress" id="progressText">
              Soal 1 / 100 ‚Äî Verbal (1/25)
            </div>
            <div class="small">
              Klik pilihan untuk memilih jawaban. Kamu bisa mengubah jawaban
              sebelum menekan "Selesai Tes".
            </div>
          </div>
          <div style="text-align: right">
            <div class="timer" id="timer">90:00</div>
            <div class="small">Waktu tersisa</div>
          </div>
        </div>

        <div class="question-area" id="questionArea">
          <!-- question injected here -->
        </div>

        <div class="controls">
          <div>
            <button class="btn secondary" id="prevBtn">Previous</button>
            <button class="btn" id="nextBtn">Next</button>
          </div>
          <div>
            <button class="btn secondary" id="saveBtn">Simpan Jawaban</button>
            <button class="btn" id="finishBtn">Selesai Tes</button>
          </div>
        </div>

        <div class="summary" id="summary" style="display: none">
          <div class="result" id="resultBox"></div>
          <div style="margin-top: 10px; display: flex; gap: 8px">
            <button class="download-btn" id="downloadPdf">
              Download / Print Hasil (PDF)
            </button>
            <button class="download-btn" id="downloadHtml">
              Download Hasil (.html)
            </button>
          </div>
          <div class="detail-list" id="detailList"></div>
        </div>

        <div class="footer">
          Catatan: Untuk menyimpan hasil sebagai PDF, gunakan tombol "Download /
          Print Hasil (PDF)" lalu pilih "Save as PDF" di dialog print.
        </div>
      </div>
    </div>

    <script>
      // --- We'll create 100 PLN-themed unique questions (25 per category)
      // For brevity here we'll generate representative questions; in final file these are explicit and unique.

      // Helper to create question objects
      function q(text, opts, correct) {
        return { q: text, opts: opts, correct: correct };
      }

      // 25 Verbal (PLN-themed)
      const verbal = [
        q(
          'Istilah "transformator" pada jaringan distribusi berfungsi untuk?',
          [
            "menaikkan tegangan",
            "menurunkan tegangan",
            "menyimpan daya",
            "mengukur arus",
          ],
          1
        ),
        q(
          'Arti singkatan "PLN" adalah?',
          [
            "Perusahaan Listrik Nasional",
            "Penyedia Listrik Negeri",
            "Perusahaan Listrik Negara",
            "Pusat Listrik Nasional",
          ],
          2
        ),
        q(
          'Sinonim kata "reliability" dalam konteks sistem tenaga adalah?',
          ["efisiensi", "keandalan", "kapasitas", "tegangan"],
          1
        ),
        q(
          'Istilah "substation" dalam bahasa Indonesia berarti?',
          ["gardu induk", "pembangkit", "saluran transmisi", "trafo kecil"],
          0
        ),
        q(
          'Makna "load shedding" adalah...',
          [
            "penambahan beban",
            "pemadaman bergilir",
            "pemeliharaan sistem",
            "penyimpanan energi",
          ],
          1
        ),
        q(
          'Antonim kata "fault" pada jaringan adalah?',
          ["gangguan", "normal", "kerusakan", "putus"],
          1
        ),
        q(
          'Pilihan istilah yang tepat untuk "maintenance" adalah?',
          ["pemutus", "perbaikan berkala", "peningkatan", "penjadwalan"],
          1
        ),
        q(
          'Sinonim "efficiency" adalah?',
          ["efisiensi", "energi", "tegangan", "arus"],
          0
        ),
        q(
          'Istilah "outage" sering berarti?',
          ["ketersediaan", "pemadaman", "penyambungan", "penurunan"],
          1
        ),
        q(
          'Pilihan kata baku: "teknisi" atau "teknik" untuk pekerja lapangan?',
          ["teknisi", "teknik", "teknikal", "tekno"],
          0
        ),
        q(
          'Arti "renewable energy" adalah?',
          [
            "energi yang dapat diperbarui",
            "energi fosil",
            "energi panas",
            "energi nonterbarukan",
          ],
          0
        ),
        q(
          'Sinonim "dispatch" dalam konteks operasi adalah?',
          ["mengatur pengiriman", "mengabaikan", "mempercepat", "membatalkan"],
          0
        ),
        q(
          'Kata tepat untuk "inspection" adalah?',
          ["inspeksi", "instruksi", "injeksi", "injektil"],
          0
        ),
        q(
          'Makna "protection relay" adalah perangkat untuk?',
          [
            "mengunci gardu",
            "melindungi sistem dari gangguan",
            "menambah beban",
            "mengurangi efisiensi",
          ],
          1
        ),
        q(
          'Antonim "overload" adalah?',
          ["underload", "normal load", "extra load", "high load"],
          1
        ),
        q(
          'Istilah "switchgear" berkaitan dengan?',
          [
            "peralatan pemutus arus",
            "pembangkit mini",
            "kabel bawah tanah",
            "kwh meter",
          ],
          0
        ),
        q(
          'Pilihan kata baku: "tegangan" vs "tekanan" ‚Üí yang tepat adalah',
          ["tegangan", "tekanan", "kedua", "tidak satupun"],
          0
        ),
        q(
          'Sinonim "commissioning" berarti?',
          [
            "pengujian dan penempatan",
            "pembongkaran",
            "pengurangan",
            "penjadwalan",
          ],
          0
        ),
        q(
          'Pilihan yang tepat: "Gardu" dalam bahasa Inggris adalah...',
          ["Plant", "Substation", "Line", "Generator"],
          1
        ),
        q(
          'Antonim "reliable" adalah?',
          ["handal", "tidak handal", "efisien", "aman"],
          1
        ),
        q(
          'Makna "capacity" dalam konteks pembangkit adalah?',
          [
            "kapasitas produksi",
            "kapasitas transportasi",
            "kapasitas penyimpanan",
            "kapasitas manusia",
          ],
          0
        ),
        q(
          'Sinonim "outage management" adalah?',
          [
            "manajemen pemadaman",
            "manajemen kelebihan",
            "manajemen beban",
            "manajemen energi",
          ],
          0
        ),
        q(
          'Arti "SCADA" berkaitan dengan?',
          [
            "sistem kontrol dan pemantauan",
            "sistem distribusi manual",
            "sistem pembangkit kecil",
            "sistem administrasi",
          ],
          0
        ),
        q(
          'Pilihan kata yang tepat: "metering" artinya?',
          [
            "pengukuran energi",
            "pembuatan meter",
            "pemutusan arus",
            "pemasangan kabel",
          ],
          0
        ),
        q(
          'Makna istilah "grid" adalah?',
          ["jaringan listrik", "kotak kontrol", "rumah pelanggan", "kapasitas"],
          0
        ),
      ];

      // 25 Numerik (PLN-themed)
      const numerik = [
        q(
          "Jika sebuah gardu memiliki kapasitas 100 MW dan beban meningkat 25%, kapasitas yang dibutuhkan menjadi?",
          ["125 MW", "110 MW", "100 MW", "75 MW"],
          0
        ),
        q(
          "Daya (P) = V √ó I. Jika V=220V dan I=10A, P=?",
          ["2200 W", "1100 W", "220 W", "4400 W"],
          0
        ),
        q(
          "Jika efisiensi turbin 80% dan input energi 1000 kW ‚Üí output energi?",
          ["800 kW", "850 kW", "700 kW", "900 kW"],
          0
        ),
        q(
          "Jika trafo step-down menurunkan 20kV ke 0.4kV, rasio t = ?",
          ["50:1", "20:1", "10:1", "100:1"],
          0
        ),
        q(
          "Jika suatu feeder memiliki resistansi 2Œ© dan arus 5A, rugi-rugi P=I^2R ‚Üí berapa?",
          ["50 W", "10 W", "25 W", "100 W"],
          2
        ),
        q(
          "Jika 360¬∞ setara 1 putaran, 90¬∞ adalah berapa persen?",
          ["25%", "20%", "30%", "15%"],
          0
        ),
        q(
          "Jika sebuah pembangkit menghasilkan 150 MW selama 10 jam, energi total?",
          ["1500 MWh", "150 MWh", "15 MWh", "15000 MWh"],
          0
        ),
        q(
          "Jika kWh meter menunjukkan 480 kWh dalam 4 jam, rata-rata daya?",
          ["120 kW", "240 kW", "480 kW", "60 kW"],
          0
        ),
        q(
          "Jika transformator memiliki perbandingan 10:1 dan sisi primer 2300V, sisi sekunder?",
          ["230 V", "23000 V", "23 V", "2.3 V"],
          0
        ),
        q(
          "Jika efisiensi sistem naik dari 70% ke 77%, persen kenaikan relatif?",
          ["10%", "7%", "25%", "14%"],
          0
        ),
        q(
          "Jika arus bocor 0.02A pada 220V, daya bocor?",
          ["4.4 W", "0.44 W", "44 W", "0.02 W"],
          0
        ),
        q(
          "Jika rasio 3:2 pada alokasi tenaga 300 MW, bagian A?",
          ["180 MW", "150 MW", "200 MW", "120 MW"],
          0
        ),
        q(
          "Jika frekuensi 50 Hz, periode T=?",
          ["0.02 s", "0.2 s", "2 s", "0.5 s"],
          0
        ),
        q(
          "Jika kapasitas 500 MVA dan faktor daya 0.8, daya nyata P=?",
          ["400 MW", "500 MW", "600 MW", "320 MW"],
          0
        ),
        q(
          "Jika energi terbarukan menyumbang 30% dari 1000 MWh, berapa?",
          ["300 MWh", "200 MWh", "400 MWh", "100 MWh"],
          0
        ),
        q(
          "Jika beban puncak 120 MW dan cadangan 20%, cadangan MW?",
          ["24 MW", "20 MW", "30 MW", "12 MW"],
          0
        ),
        q(
          "Jika jarak transmisi 50 km dan kerugian proporsional, pilihan perhitungan mana yang mempengaruhi loss?",
          [
            "tegangan, arus, resistansi",
            "warna kabel",
            "lokasi kantor",
            "jumlah teknisi",
          ],
          0
        ),
        q(
          "Jika satu kWh = 3.6 MJ, berapa MJ untuk 2 kWh?",
          ["7.2 MJ", "3.6 MJ", "72 MJ", "0.72 MJ"],
          0
        ),
        q(
          "Jika daya semula 200 kW turun 10%, nilai akhir?",
          ["180 kW", "190 kW", "160 kW", "170 kW"],
          0
        ),
        q(
          "Jika trafo memiliki efisiensi 98% dan input 1000 kW, output?",
          ["980 kW", "960 kW", "920 kW", "900 kW"],
          0
        ),
        q(
          "Jika pembacaan meter berubah dari 1000 ke 1120 dalam sebulan, pemakaian?",
          ["120 kWh", "1120 kWh", "1000 kWh", "220 kWh"],
          0
        ),
        q(
          "Jika sebuah feeder membawa 200 A pada 400 V, daya?",
          ["80 kW", "50 kW", "100 kW", "200 kW"],
          0
        ),
        q(
          "Jika tegangan turun 10% pada distribusi, pengaruh pada daya bila I konstan?",
          ["turun 10%", "naik 10%", "tetap", "turun 20%"],
          0
        ),
        q(
          "Jika resistor 10Œ© dan arus 2A, tegangan?",
          ["20 V", "5 V", "10 V", "40 V"],
          0
        ),
        q(
          "Jika beban 75 MW dan pembangkit 100 MW ‚Üí sisa?",
          ["25 MW", "15 MW", "35 MW", "20 MW"],
          0
        ),
      ];

      // 25 Logika (PLN scenarios)
      const logika = [
        q(
          "Shift teknisi A, B, C bergantian. Jika A menggantikan B besok dan C tadi, siapa bertugas hari ini?",
          ["A", "B", "C", "Tidak cukup info"],
          3
        ),
        q(
          "Jika alarm proteksi aktif saat arus tinggi, tindakan pertama?",
          [
            "Matikan seluruh sistem",
            "Investigasi dan isolasi gangguan",
            "Tingkatkan beban",
            "Abaikan",
          ],
          1
        ),
        q(
          "Jika beberapa trafo mengalami overheating, langkah terbaik?",
          [
            "Tambal saja",
            "Lakukan pendinginan dan inspeksi",
            "Tingkatkan beban",
            "Kurangi perawatan",
          ],
          1
        ),
        q(
          "Jika sebuah feeder putus menyebabkan outage, tindakan untuk pelanggan?",
          [
            "Beri info jadwal pemulihan",
            "Sembunyikan info",
            "Matikan pelanggan lain",
            "Tambahkan beban",
          ],
          0
        ),
        q(
          "Jika koneksi ground tidak terpasang maka risiko?",
          [
            "Kebocoran informasi",
            "Bahaya keselamatan dan gangguan",
            "Meningkatkan efisiensi",
            "Tidak berpengaruh",
          ],
          1
        ),
        q(
          "Jika data SCADA tidak masuk, langkah?",
          [
            "Reload server",
            "Periksa komunikasi dan sensor",
            "Ganti operator",
            "Shutdown",
          ],
          1
        ),
        q(
          "Jika kerja di dekat kabel hidup, keutamaan?",
          [
            "Gunakan APD dan isolasi",
            "Beralih kerja",
            "Gunakan air",
            "Langsung pegang kabel",
          ],
          0
        ),
        q(
          "Jika gangguan terjadi saat badai, prioritas?",
          [
            "Pemulihan safety-critical loads",
            "Perbaikan estetika",
            "Ganti semuanya",
            "Tunda sampai seminggu",
          ],
          0
        ),
        q(
          "Jika peralatan menunjukkan parameter abnormal, tindakan awal?",
          [
            "Catat dan monitor",
            "Abaikan",
            "Hentikan operasi permanen",
            "Buang peralatan",
          ],
          0
        ),
        q(
          "Jika ada kontradiksi data meter dan laporan pelanggan, yang harus dilakukan?",
          [
            "Percaya laporan pelanggan",
            "Lakukan audit meter dan cek ulang",
            "Tuduh pelanggan",
            "Ganti meter langsung",
          ],
          1
        ),
        q(
          "Jika dua sumber suplai tersedia, prioritas untuk beban kritis?",
          [
            "Sumber yang paling stabil",
            "Sumber termurah",
            "Sumber terdekat",
            "Tidak penting",
          ],
          0
        ),
        q(
          "Jika pekerja tidak hadir saat shift, konsekuensi logis?",
          [
            "Tambahkan overtime",
            "Kurangi beban",
            "Batalkan semua pekerjaan",
            "Tunda semua maintenance",
          ],
          0
        ),
        q(
          "Jika kabel bawah tanah sering putus di titik yang sama, kesimpulan?",
          [
            "Masalah instalasi atau kondisi tanah",
            "Kualitas operator buruk",
            "Tidak ada masalah",
            "Perlu lebih beban",
          ],
          0
        ),
        q(
          "Jika remote trip gagal, langkah?",
          [
            "Manual isolate",
            "Biarkan berjalan",
            "Reset otomatis",
            "Percepat beban",
          ],
          0
        ),
        q(
          "Jika alarm gas di ruang mesin, prioritas?",
          [
            "Evakuasi dan ventilasi",
            "Percepat operasi",
            "Matikan alarm",
            "Tambahkan bahan bakar",
          ],
          0
        ),
        q(
          "Jika supervisor memerintahkan shutdown tapi SCADA tidak menampilkan, apa yang dilakukan?",
          [
            "Ikuti perintah dan lapor",
            "Abaikan perintah",
            "Tanya operator lain",
            "Matikan komunikasi",
          ],
          0
        ),
        q(
          "Jika ada dua tugas sama penting tapi hanya satu tim, solusi terbaik?",
          [
            "Prioritaskan berdasarkan risiko",
            "Kerjakan salah satu secara acak",
            "Tunda semuanya",
            "Panggil manajer",
          ],
          0
        ),
        q(
          "Jika dokumentasi tidak konsisten, langkah?",
          [
            "Perbaiki dokumentasi dan audit",
            "Sembunyikan ketidaksesuaian",
            "Abaikan",
            "Hapus dokumen",
          ],
          0
        ),
        q(
          "Jika peralatan baru dikomisi, langkah awal?",
          [
            "Langsung operasikan penuh",
            "Lakukan commissioning dan pengujian",
            "Jangan gunakan",
            "Beri beban maksimal",
          ],
          1
        ),
        q(
          "Jika maintenance berkala tertunda, risiko?",
          [
            "Peningkatan kegagalan dan outage",
            "Hemat biaya",
            "Tidak berpengaruh",
            "Lebih efisien",
          ],
          0
        ),
        q(
          "Jika ada lonjakan beban tiba-tiba, tindakan cepat?",
          [
            "Redistribusi beban dan shed non-critical",
            "Tambahkan beban",
            "Kurangi produksi",
            "Shutdown pusat",
          ],
          0
        ),
        q(
          "Jika laporan insiden tidak lengkap, apa langkah?",
          [
            "Minta detail dan investigasi",
            "Tutup laporan",
            "Biarkan saja",
            "Kirim ke pelanggan",
          ],
          0
        ),
        q(
          "Jika komunikasi antara tim hilang, dampaknya?",
          [
            "Kesalahan koordinasi dan risiko keselamatan",
            "Lebih cepat bekerja",
            "Lebih sedikit dokumentasi",
            "Tidak ada dampak",
          ],
          0
        ),
        q(
          "Jika trafo menunjukkan suhu tinggi, pilih tindakan segera?",
          [
            "Kurangi beban dan cek pendinginan",
            "Tingkatkan beban",
            "Ignore",
            "Percepat operasi",
          ],
          0
        ),
        q(
          "Jika terjadi fault, siapa yang harus diberi tahu pertama?",
          ["Manajer proyek", "Operator lapangan", "Pelanggan", "Vendor"],
          1
        ),
      ];

      // 25 Analitik (data/pln reasoning)
      const analitik = [
        q(
          "Grafik beban menunjukkan puncak jam 18-20 ‚Äî apa rekomendasi?",
          [
            "Tambahkan kapasitas sedang puncak",
            "Kurangi kapasitas",
            "Hentikan pembangkit",
            "Tidak lakukan apa-apa",
          ],
          0
        ),
        q(
          "Jika rasio losses tinggi di area X dibanding area Y, kemungkinan penyebab?",
          [
            "Kualitas jaringan, panjang feeder, atau beban tidak seimbang",
            "Cuaca saja",
            "Hanya pelanggan",
            "Tidak ada hubungan",
          ],
          0
        ),
        q(
          "Jika efisiensi jaringan turun setelah hujan, penjelasan mungkin?",
          [
            "Kelembaban mempengaruhi isolasi dan koneksi",
            "Lebih banyak beban",
            "Pengaruh harga",
            "Operator kurang tidur",
          ],
          0
        ),
        q(
          "Jika data SCADA menunjukkan fluktuasi, analisis awal?",
          [
            "Periksa sensor dan komunikasi sebelum kesimpulan",
            "Langsung ganti perangkat",
            "Abaikan data",
            "Hentikan semua operasi",
          ],
          0
        ),
        q(
          "Jika perbandingan transformator A vs B: A lebih efisien 2% namun lebih mahal. Keputusan?",
          [
            "Pertimbangkan total biaya kepemilikan dan reliability",
            "Pilih yang murah saja",
            "Pilih yang mahal tanpa analisis",
            "Beli keduanya",
          ],
          0
        ),
        q(
          "Jika beban rumah tangga bertambah pada malam hari, strategi?",
          [
            "Tarif malam / manajemen beban / dorong efisiensi",
            "Tutup layanan malam",
            "Kurangi pasokan",
            "Hentikan listrik",
          ],
          0
        ),
        q(
          "Jika data menunjukkan satu pelanggan konsumsi sangat tinggi abnormal, langkah?",
          [
            "Audit meter dan cek instalasi",
            "Tuduh pelanggan",
            "Naikkan tagihan langsung",
            "Ganti meter tanpa cek",
          ],
          0
        ),
        q(
          "Jika analisis menunjukkan korelasi antara umur kabel dan gangguan, apa rekomendasi?",
          [
            "Rencanakan penggantian dan prioritas maintenance",
            "Abaikan",
            "Tingkatkan beban",
            "Kurangi inspeksi",
          ],
          0
        ),
        q(
          "Jika proposisi investasi turbin kecil menghasilkan IRR rendah, keputusan?",
          [
            "Tinjau kembali asumsi dan alternatif finansial",
            "Langsung tolak",
            "Terima tanpa analisis",
            "Biarkan investor",
          ],
          0
        ),
        q(
          "Jika analisa biaya-manfa at menunjukkan payback 5 tahun baik untuk proyek, keputusan?",
          [
            "Pertimbangkan implementasi jika sesuai risiko",
            "Abaikan",
            "Terus tunda",
            "Hentikan operasional",
          ],
          0
        ),
        q(
          "Jika rasio fault/100 km tinggi di area A, prioritas?",
          [
            "Investigasi faktor lokal dan upgrade jaringan",
            "Biarkan saja",
            "Kurangi pelanggan",
            "Naikkan tarif",
          ],
          0
        ),
        q(
          "Jika pembangkitan terdesentralisasi meningkat, efek pada grid?",
          [
            "Mengurangi beban jaringan pusat dan mengubah flow power",
            "Tidak ada efek",
            "Hanya meningkatkan gangguan",
            "Menambah kehilangan",
          ],
          0
        ),
        q(
          "Jika proyek PV menunjukkan produksi turun 10% tiap tahun, interpretasi?",
          [
            "Mungkin degradasi panel atau kotoran; lakukan inspeksi",
            "Normal saja",
            "Matikan semua panel",
            "Tambah panel tanpa analisis",
          ],
          0
        ),
        q(
          "Jika analitik menunjukkan puncak beban shift kerja pabrik, solusi?",
          [
            "Koordinasi dengan industri untuk shifting atau demand response",
            "Tidak ada solusi",
            "Turunkan tarif",
            "Off-grid usaha",
          ],
          0
        ),
        q(
          "Jika evaluasi maintenance mengurangi outage 15% setelah intervensi, implikasi?",
          [
            "Program maintenance efektif; lanjutkan dan scale up",
            "Tidak relevan",
            "Hentikan program",
            "Kurangi frekuensi",
          ],
          0
        ),
        q(
          "Jika data menunjukkan fluktuasi frekuensi, tindakan cepat?",
          [
            "Stabilize generation and shed non-critical loads",
            "Tambahkan beban",
            "Abaikan",
            "Ganti customer",
          ],
          0
        ),
        q(
          "Jika perbandingan cost per MWh antara bahan bakar A dan B, apa fokus keputusan?",
          [
            "Total cost, availability, dan environmental impact",
            "Hanya harga saat ini",
            "Hanya emisi",
            "Hanya kapasitas",
          ],
          0
        ),
        q(
          "Jika hasil studi menunjukkan konsentrasi gangguan pada satu feeder, solusi?",
          [
            "Rekonfigurasi jaringan dan targeted maintenance",
            "Ganti semua feeder",
            "Kurangi beban negara",
            "Hentikan layanan",
          ],
          0
        ),
        q(
          "Jika analisis menunjukkan efisiensi genset menurun saat beban rendah, strategi?",
          [
            "Optimalkan dispatch dan gunakan genset efisien saat beban tinggi",
            "Biarkan seperti itu",
            "Tambah genset",
            "Kurangi pelanggan",
          ],
          0
        ),
        q(
          "Jika beban puncak diprediksi naik 5% per tahun, rencana jangka panjang?",
          [
            "Capacity expansion, demand-side management, and renewables integration",
            "Tutup perusahaan",
            "Kurangi layanan",
            "Naikkan tarif drastis",
          ],
          0
        ),
        q(
          "Jika analisa menunjukkan pelanggan industri menyumbang besar tetapi jam puncak berbeda, solusi?",
          [
            "Kolaborasi demand response dan agregasi beban",
            "Tuntut pengurangan",
            "Matikan pabrik",
            "Ganti pelanggan",
          ],
          0
        ),
        q(
          "Jika simulasi memperlihatkan overload pada transformator tertentu, langkah?",
          [
            "Redistribusi beban atau upgrade transformer",
            "Biarkan terus",
            "Kurangi pasokan pelanggan",
            "Overload lebih baik",
          ],
          0
        ),
        q(
          "Jika trend gangguan meningkat setelah perubahan vendor, tindak lanjut?",
          [
            "Audit kualitas material dan pemasangan",
            "Tidak ada tindakan",
            "Ganti vendor lagi",
            "Tuduh pekerja",
          ],
          0
        ),
        q(
          "Jika analitik menilai risiko tinggi pada aset tua, prioritas?",
          [
            "Prioritas replacement dan monitoring",
            "Tidak perlu",
            "Tunda sampai rusak",
            "Kurangi data monitoring",
          ],
          0
        ),
        q(
          "Jika evaluasi economic shows long-term savings, rekomendasi?",
          [
            "Investasi awal untuk penghematan jangka panjang",
            "Hentikan investasi",
            "Tunggu 10 tahun",
            "Pindah ke vendor lain",
          ],
          0
        ),
      ];

      // Combine and ensure uniqueness by question text
      let questions = [
        ...verbal.slice(0, 25),
        ...numerik.slice(0, 25),
        ...logika.slice(0, 25),
        ...analitik.slice(0, 25),
      ];
      (function dedupe() {
        const seen = new Set();
        const unique = [];
        questions.forEach((q) => {
          const txt = q.q.trim();
          if (!seen.has(txt)) {
            seen.add(txt);
            unique.push(q);
          }
        });
        if (unique.length !== questions.length) {
          console.warn(
            "Duplicates found and removed. Questions remaining:",
            unique.length
          );
          questions = unique;
        }
      })();

      // Explanations (brief bilingual tutor style) - array aligned with questions
      const explanations = questions.map((item, idx) => {
        // For brevity provide concise tutor-style explanations tailored to type
        const cat =
          idx < 25
            ? "Verbal"
            : idx < 50
            ? "Numerik"
            : idx < 75
            ? "Logika"
            : "Analitik";
        let id_text = "";
        let en_text = "";

        if (cat === "Verbal") {
          // simple explanations mapping by keyword
          if (item.q.toLowerCase().includes("transformator")) {
            id_text =
              "Transformator mengubah level tegangan; pada distribusi biasanya menurunkan tegangan ke level konsumen.";
            en_text =
              "Transformer changes voltage levels; in distribution it typically steps down voltage for consumers.";
          } else if (item.q.toLowerCase().includes("pln")) {
            id_text = 'PLN adalah singkatan resmi "Perusahaan Listrik Negara".';
            en_text =
              'PLN stands for "Perusahaan Listrik Negara" (State Electricity Company).';
          } else if (item.q.toLowerCase().includes("reliability")) {
            id_text =
              "Reliability berarti keandalan sistem dalam menyediakan pasokan listrik.";
            en_text =
              "Reliability means the system‚Äôs ability to reliably supply electricity.";
          } else {
            id_text =
              "Pilih jawaban yang paling sesuai dengan istilah teknis PLN.";
            en_text =
              "Choose the option that best matches the PLN technical term.";
          }
        } else if (cat === "Numerik") {
          // numeric: compute or describe
          if (
            item.q.toLowerCase().includes("100 mw") &&
            item.q.includes("25%")
          ) {
            id_text = "Kenaikan 25% dari 100 MW = 25 MW ‚Üí total 125 MW.";
            en_text = "25% of 100 MW = 25 MW ‚Üí total 125 MW.";
          } else if (
            item.q.toLowerCase().includes("v=220") ||
            item.q.toLowerCase().includes("v=220v")
          ) {
            id_text = "Gunakan rumus P = V √ó I.";
            en_text = "Use formula P = V √ó I.";
          } else {
            id_text =
              "Hitung sesuai rumus listrik dasar (P=VI, I^2R, persentase, dsb.).";
            en_text =
              "Compute using basic electrical formulas (P=VI, I^2R, percentages, etc.).";
          }
        } else if (cat === "Logika") {
          id_text =
            "Pilih aksi yang paling aman dan prosedural sesuai SOP operasional PLN.";
          en_text =
            "Choose the action that is safest and aligns with PLN operational SOPs.";
        } else {
          id_text =
            "Analisis data: fokus pada reliability, cost-benefit, dan mitigasi risiko.";
          en_text =
            "Data analysis: focus on reliability, cost-benefit, and risk mitigation.";
        }
        return { id_text, en_text };
      });

      // State
      let currentIndex = 0;
      const answers = Array(questions.length).fill(null);
      let timerSeconds = 90 * 60; // 1.5 hours
      let timerInterval;
      let started = false;

      // DOM refs
      const startScreen = document.getElementById("startScreen");
      const startBtn = document.getElementById("startBtn");
      const reviewBtn = document.getElementById("reviewBtn");
      const mainContent = document.getElementById("mainContent");
      const questionArea = document.getElementById("questionArea");
      const progressText = document.getElementById("progressText");
      const timerEl = document.getElementById("timer");
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const saveBtn = document.getElementById("saveBtn");
      const finishBtn = document.getElementById("finishBtn");
      const summary = document.getElementById("summary");
      const resultBox = document.getElementById("resultBox");
      const detailList = document.getElementById("detailList");
      const downloadPdf = document.getElementById("downloadPdf");
      const downloadHtml = document.getElementById("downloadHtml");

      startBtn.addEventListener("click", startTest);
      reviewBtn.addEventListener("click", () => {
        alert(
          'Silakan ambil waktu singkat untuk membaca doa/bersiap. Klik "Mulai Tes" saat sudah siap.'
        );
      });

      function startTest() {
        if (started) return;
        started = true;
        startScreen.classList.add("fade-out");
        setTimeout(() => {
          startScreen.style.display = "none";
          mainContent.style.display = "block";
          mainContent.classList.add("fade-in");
          renderQuestion(currentIndex);
          startTimer();
        }, 420);
      }

      function renderQuestion(idx) {
        const item = questions[idx];
        const catIndex =
          idx < 25
            ? idx + 1
            : idx < 50
            ? idx - 25 + 1
            : idx < 75
            ? idx - 50 + 1
            : idx - 75 + 1;
        const category =
          idx < 25
            ? "Verbal"
            : idx < 50
            ? "Numerik"
            : idx < 75
            ? "Logika"
            : "Analitik";
        progressText.textContent = `Soal ${idx + 1} / ${
          questions.length
        } ‚Äî ${category} (${catIndex}/25)`;
        questionArea.innerHTML = "";
        const qDiv = document.createElement("div");
        qDiv.innerHTML = `<div class="qtext">${item.q}</div><div class="options" id="opts"></div>`;
        questionArea.appendChild(qDiv);
        const optsDiv = document.getElementById("opts");
        item.opts.forEach((opt, i) => {
          const btn = document.createElement("button");
          btn.className = "opt-btn";
          btn.innerText = `${String.fromCharCode(65 + i)}. ${opt}`;
          btn.onclick = () => selectOption(idx, i);
          if (answers[idx] === i) btn.classList.add("selected");
          optsDiv.appendChild(btn);
        });
      }

      function selectOption(qIdx, optIdx) {
        answers[qIdx] = optIdx;
        const optsDiv = document.getElementById("opts");
        if (!optsDiv) return;
        optsDiv
          .querySelectorAll("button")
          .forEach((b, bi) => b.classList.toggle("selected", bi === optIdx));
      }
      prevBtn.addEventListener("click", () => {
        if (currentIndex > 0) {
          currentIndex--;
          renderQuestion(currentIndex);
        }
      });
      nextBtn.addEventListener("click", () => {
        if (currentIndex < questions.length - 1) {
          currentIndex++;
          renderQuestion(currentIndex);
        }
      });
      saveBtn.addEventListener("click", () => {
        alert(
          "Jawaban tersimpan untuk soal ini. Kamu masih bisa mengubah sampai menekan Selesai Tes."
        );
      });
      finishBtn.addEventListener("click", () => {
        if (!started) {
          alert("Tes belum dimulai. Tekan Mulai Tes dulu.");
          return;
        }
        if (confirm("Anda yakin ingin mengakhiri tes dan melihat hasil?"))
          finishTest();
      });

      function finishTest(auto = false) {
        clearInterval(timerInterval);
        let correctCount = 0;
        const details = [];
        for (let i = 0; i < questions.length; i++) {
          const user = answers[i];
          const right = questions[i].correct;
          const ok = user === right;
          if (ok) correctCount++;
          const expl = explanations[i] || { id_text: "", en_text: "" };
          details.push({
            index: i + 1,
            category:
              i < 25
                ? "Verbal"
                : i < 50
                ? "Numerik"
                : i < 75
                ? "Logika"
                : "Analitik",
            question: questions[i].q,
            user: user,
            userText:
              user === null
                ? "‚Äî"
                : `${String.fromCharCode(65 + user)}. ${
                    questions[i].opts[user]
                  }`,
            correct: `${String.fromCharCode(65 + right)}. ${
              questions[i].opts[right]
            }`,
            isCorrect: ok,
            explanation_id: expl.id_text,
            explanation_en: expl.en_text,
          });
        }
        const percent = Math.round((correctCount / questions.length) * 100);
        resultBox.innerHTML = `<strong>Skor kamu: ${correctCount} / ${
          questions.length
        } (${percent}%)</strong><div class="small" style="margin-top:6px">Waktu tersisa saat selesai: ${formatTime(
          timerSeconds
        )}</div>`;
        detailList.innerHTML = "";
        const table = document.createElement("div");
        details.forEach((d) => {
          const row = document.createElement("div");
          row.style.padding = "8px";
          row.style.borderBottom = "1px solid #eef9f5";
          row.innerHTML = `<div style="font-weight:600">${d.category} ‚Äî Soal ${
            d.index
          }</div><div style="margin-top:6px">${
            d.question
          }</div><div style="margin-top:6px;color:${
            d.isCorrect ? "#0b8f66" : "#b33d3d"
          }">Jawaban Kamu: ${d.userText} ‚Äî Kunci: ${
            d.correct
          }</div><div class="explain"><strong>Penjelasan (ID):</strong><div>${
            d.explanation_id
          }</div><strong style="margin-top:6px;display:block">Explanation (EN):</strong><div>${
            d.explanation_en
          }</div></div>`;
          table.appendChild(row);
        });
        detailList.appendChild(table);
        summary.style.display = "block";
        summary.scrollIntoView({ behavior: "smooth" });
        if (auto) {
          openPrintWindow(generateResultHtml(correctCount, details, percent));
        }
      }

      function formatTime(s) {
        const m = Math.floor(s / 60);
        const sec = s % 60;
        return `${String(m).padStart(2, "0")}:${String(sec).padStart(2, "0")}`;
      }
      function startTimer() {
        timerEl.textContent = formatTime(timerSeconds);
        timerInterval = setInterval(() => {
          timerSeconds--;
          timerEl.textContent = formatTime(timerSeconds);
          if (timerSeconds <= 0) {
            clearInterval(timerInterval);
            alert("Waktu habis ‚Äî tes akan diselesaikan secara otomatis.");
            finishTest(true);
          }
        }, 1000);
      }

      function generateResultHtml(score, details, percent) {
        const title = "Hasil Tes GAT PLN ‚Äî Part 2";
        let html = `<!doctype html><html><head><meta charset="utf-8"><title>${title}</title><style>body{font-family:Arial;padding:20px;color:#012822}h1{color:#006a58} .row{margin-bottom:12px;padding:8px;border-bottom:1px solid #eee} .explain{background:#f0fffb;padding:8px;border-radius:6px;margin-top:6px}</style></head><body>`;
        html += `<h1>${title}</h1>`;
        html += `<p><strong>Skor: ${score} / ${questions.length} (${percent}%)</strong></p>`;
        html += `<hr/>`;
        details.forEach((d) => {
          html += `<div class="row"><div><strong>${d.category} ‚Äî Soal ${d.index}</strong></div><div style="margin-top:6px">${d.question}</div><div style="margin-top:6px">Jawaban Kamu: ${d.userText}</div><div>Kunci: ${d.correct}</div><div class="explain"><strong>Penjelasan (ID):</strong><div>${d.explanation_id}</div><strong>Explanation (EN):</strong><div>${d.explanation_en}</div></div></div>`;
        });
        html += `</body></html>`;
        return html;
      }

      function openPrintWindow(html) {
        const w = window.open("", "_blank");
        w.document.open();
        w.document.write(html);
        w.document.close();
        setTimeout(() => {
          w.print();
        }, 600);
      }

      downloadPdf.addEventListener("click", () => {
        let correctCount = 0;
        const details = [];
        for (let i = 0; i < questions.length; i++) {
          const user = answers[i];
          const right = questions[i].correct;
          if (user === right) correctCount++;
          const expl = explanations[i] || { id_text: "", en_text: "" };
          details.push({
            index: i + 1,
            category:
              i < 25
                ? "Verbal"
                : i < 50
                ? "Numerik"
                : i < 75
                ? "Logika"
                : "Analitik",
            question: questions[i].q,
            user: user,
            userText:
              user === null
                ? "‚Äî"
                : `${String.fromCharCode(65 + user)}. ${
                    questions[i].opts[user]
                  }`,
            correct: `${String.fromCharCode(65 + right)}. ${
              questions[i].opts[right]
            }`,
            isCorrect: user === right,
            explanation_id: expl.id_text,
            explanation_en: expl.en_text,
          });
        }
        const percent = Math.round((correctCount / questions.length) * 100);
        const html = generateResultHtml(correctCount, details, percent);
        openPrintWindow(html);
      });

      downloadHtml.addEventListener("click", () => {
        let correctCount = 0;
        const details = [];
        for (let i = 0; i < questions.length; i++) {
          const user = answers[i];
          const right = questions[i].correct;
          if (user === right) correctCount++;
          const expl = explanations[i] || { id_text: "", en_text: "" };
          details.push({
            index: i + 1,
            category:
              i < 25
                ? "Verbal"
                : i < 50
                ? "Numerik"
                : i < 75
                ? "Logika"
                : "Analitik",
            question: questions[i].q,
            user: user,
            userText:
              user === null
                ? "‚Äî"
                : `${String.fromCharCode(65 + user)}. ${
                    questions[i].opts[user]
                  }`,
            correct: `${String.fromCharCode(65 + right)}. ${
              questions[i].opts[right]
            }`,
            isCorrect: user === right,
            explanation_id: expl.id_text,
            explanation_en: expl.en_text,
          });
        }
        const percent = Math.round((correctCount / questions.length) * 100);
        const html = generateResultHtml(correctCount, details, percent);
        const blob = new Blob([html], { type: "text/html" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "hasil_gat_pln_part2.html";
        a.click();
        URL.revokeObjectURL(url);
      });

      // Init: start screen shows; questions rendered after start
    </script>
  </body>
</html>
